# 🏘️ 福音小镇 (Gospel Town) — 项目总览

> **灵感来源**: 星露谷物语 · 鹬鹕镇  
**技术路线**: 纯前端架构（HTML5 Canvas + Vanilla JS + LLM API）  
**LLM 支持**: GLM-4-Flash（云端）/ Qwen3-14B-Q8 via Ollama（本地，推荐）  
**核心目标**: 8 位 AI 居民的像素风村落，居民能自主生活、社交、工作，玩家可以观察/对话
**当前版本**: v2.5
---

## 📋 文档索引

| 文档 | 内容 | 说明 |
|------|------|------|
| [01-design.md](01-design.md) | 🎯 设计理念 | 项目定位、与 farm3/town 的关系 |
| [02-map.md](02-map.md) | 🗺️ 地图设计 | 村庄布局、场景划分、地标、配色 |
| [03-npc.md](03-npc.md) | 👥 NPC 居民设计 | 8 个角色设定、角色专长、日程表、行动效果数值化、生存贡献闭环 |
| [04-attributes.md](04-attributes.md) | 📊 属性系统 | 五大属性（体力/San值/健康/饱腹/体温）+ 行动效果数值速查表 |
| [05-ai.md](05-ai.md) | 🤖 AI 系统 | Prompt 设计、对话系统、LLM 集成、环境感知系统 |
| [06-tech.md](06-tech.md) | ⚙️ 技术架构 | 文件结构、核心类、渲染层次、素材清单 |
| [07-plan.md](07-plan.md) | 📅 开发计划 | 分期计划、与 town 差异对比 |
| [08-changelog.md](08-changelog.md) | 📝 更新日志 | 版本历史、Bug 修复记录、功能 Checklist |
| [09-pitfalls.md](09-pitfalls.md) | 🚧 踩坑记录 | 开发经验教训、注意事项、通用原则 |

---

## 🚀 快速开始

```bash
# 直接双击 index.html 即可运行
open index.html
```

## 🎮 当前核心系统

```mermaid
graph LR
    A[日程系统] --> B[NPC 行为]
    C[天气系统] --> B
    E[属性系统] --> B
    B --> F[AI Think]
    F --> G[对话/社交]
    F --> H[移动/寻路]
    E --> F
    J[环境感知] --> F
    K[San值系统] --> B
    V[行动效果系统] --> B
    V --> E
    V --> P
    M[奖惩机制] --> F
    N[目标系统] --> M
    M --> E
    F --> O[行动决策]
    O --> H
    P[资源系统] --> B
    P --> C
    Q[暖炉系统] --> P
    Q --> B
    R[任务系统] --> O
    R --> P
    S[死亡系统] --> E
    T[轮回系统] --> F
    T --> R
    U[急救包系统] --> S
    U --> P
    W[智能分工系统] --> R
    W --> T
    W --> F
    X[决策拦截器] --> O
```

### 8 位居民

| 角色 | 职业 | 专长特色 | 家庭关系 |
|------|------|----------|----------|
| 李婶 | 物资总管/炊事长 | 食物加工×2，物资盘点减浪费20%，分配公平 | 陆辰的妈妈 |
| 赵铁柱 | 伐木工/锅炉工 | 砍柴×1.5，搬运×1.5，暖炉维护×2 | — |
| 王策 | 技师/规划师 | 发电机维修×2，暖炉扩建×1.5，全队规划+10% | — |
| 老钱 | 镇长/精神领袖 | 调解冲突×2，安抚士气×2，经验预警 | 清璇的爷爷 |
| 苏岩 | 医官 | 治疗冻伤×2，失温救治+50%，半天采集食物，巡查安抚 | — |
| 陆辰 | 采集工/建筑工 | 建材×1.5，食物采集×1.3，建造×1.3，耐寒×0.7 | 李婶的儿子 |
| 凌玥 | 侦察员/急救兵 | 废墟侦察×2，野外急救×1.5，鼓舞士气×1.3 | — |
| 清璇 | 药剂师学徒/陷阱工 | 草药制剂×1.5，陷阱/警报，无线电修理 | 老钱的孙女 |